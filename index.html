<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rexytmc Comunnity - Perfil Est√°tico</title>
  <style>
    /* ------------------------------------------------------------------
    // ESTILOS DE LA P√ÅGINA PRINCIPAL
    // ------------------------------------------------------------------ */
    body {
      margin: 0;
      background-color: #000;
      color: #fff;
      font-family: Arial, sans-serif;
    }

    /* BANNER */
    .banner {
      position: relative;
      width: 100%;
      height: 200px;
      background-color: #111;
      background-image: url('assets/portada.png');
      background-size: cover;
      background-position: center;
      overflow: hidden;
    }

    /* BOTONES ESQUINAS (AHORA SIN FUNCI√ìN, SOLO VISUALES) */
    .corner-btn {
      position: absolute;
      top: 15px;
      background: rgba(0,0,0,0.4); /* Fondo para visibilidad */
      border: none; 
      border-radius: 50%;
      width: 45px;
      height: 45px;
      display: flex;
      justify-content: center;
      align-items: center;
      cursor: default; /* Cursor por defecto, ya que no hacen nada */
      transition: 0.25s ease;
      z-index: 50;
    }

    .corner-btn:hover {
      background: rgba(0,0,0,0.6); 
      box-shadow: none;
      transform: none; /* No hay animaci√≥n al pasar el mouse */
    }

    .corner-left { left: 15px; }
    .corner-right { right: 15px; }

    .corner-btn img { width: 24px; height: 24px; display: block; }

    /* PERFIL */
    .profile {
      text-align: center;
      position: relative;
      margin-top: -50px;
    }

    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      border: 4px solid #000;
      background-color: #333;
      background-size: cover;
      background-position: center;
      margin: 0 auto 10px auto;
      display: block;
      box-shadow: 0 0 10px rgba(255, 0, 255, 0.3);
    }

    .name { font-size: 22px; font-weight:bold; }
    .by {
      font-size: 14px;
      color: #aaa;
      display:flex;
      justify-content:center;
      align-items:center;
      gap:6px;
      margin-top:2px;
    }
    .by img { width:16px; height:16px; border-radius:50%; object-fit:cover; }

    /* ESTAD√çSTICAS DEL PERFIL */
    .stats { margin:10px 0 5px 0; font-size:14px; color:#ccc; }

    .actions { display:flex; justify-content:center; gap:10px; margin-bottom:10px; }
    .btn {
      padding:8px 20px; border-radius:20px; border:none; cursor:pointer; font-weight:bold; color:#fff;
      transition: all .18s ease;
    }
    
    /* ESTILOS DE FOLLOW Y DONATE ACTUALIZADOS */
    .btn-follow { 
      background: linear-gradient(90deg, #ff0044, #ff4400); /* Rojo Vibrante */
      color: #fff;
      box-shadow: 0 0 10px rgba(255, 0, 68, 0.75); /* Bloom Rojo Constante */
    }
    .btn-follow.following {
      background: #333;
      box-shadow: none; 
      color: #ccc;
    }
    .btn-follow:hover { transform: scale(1.05); }

    .btn-donate { 
      background: linear-gradient(90deg,#ffd700,#ffa500); /* Dorado/Naranja */
      color: #000;
      box-shadow: 0 0 10px rgba(255, 215, 0, 0.75); /* Bloom Dorado Constante */
    }
    .btn-donate:hover { transform: scale(1.05); }
    /* FIN ESTILOS BOTONES PERFIL */


    /* TABS */
    .tabs { display:flex; justify-content:center; margin:20px 0; }
    .tab { margin:0 10px; padding:10px 20px; cursor:pointer; border-bottom:2px solid transparent; transition: .15s; }
    .tab:hover { color:#ff4fd8; }
    .tab.active { border-bottom:2px solid #ff4fd8; } 

    /* GALER√çA GENERAL (para Screenshots) */
    .gallery {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px;
      padding: 10px;
    }
    .gallery-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      background: #111;
      border-radius: 10px;
      overflow: hidden;
    }
    .gallery-item img {
      width: 100%;
      height: 150px;
      object-fit: cover;
      display: block;
    }
    .gallery-item p {
      margin: 8px 0;
      font-size: 13px;
      color: #ccc;
      text-align: center;
      min-height: 1.2em; 
    }
    .gallery-item p:empty { display: none; }


    /* ESTILO PARA LA SECCI√ìN DE SHADERS (1 columna) */
    .shader-list-container {
      width: 95%;
      max-width: 600px;
      margin: 0 auto;
      padding: 10px;
    }

    .shader-list {
      display: flex;
      flex-direction: column;
      gap: 15px;
      margin-top: 15px;
    }

    /* BARRA DE B√öSQUEDA */
    .search-bar {
      width: 100%;
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    .search-bar input {
      flex-grow: 1;
      padding: 10px 15px;
      border-radius: 25px;
      border: 1px solid #333;
      background: #1a1a1a;
      color: #fff;
      font-size: 16px;
    }
    .search-bar button {
      padding: 10px 15px;
      border: none;
      border-radius: 25px;
      background: linear-gradient(90deg,#ff007f,#ff4fd8);
      color: #fff;
      font-weight: bold;
      cursor: pointer;
    }

    /* PAGINACI√ìN */
    .pagination-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 10px;
      padding: 15px 0;
      font-size: 14px;
      color: #ccc;
    }
    .pagination-controls button {
      background: #2a2a2a;
      color: #fff;
      border: none;
      padding: 8px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: 0.2s;
    }
    .pagination-controls button:hover:not(:disabled) {
      background: #ff007f;
    }
    .pagination-controls button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .page-info {
        padding: 0 10px;
    }


    /* ESTILO INDIVIDUAL DEL SHADER (CARD) */
    .shader-card {
      background-color: #1a1a1a;
      border-radius: 12px;
      overflow: hidden;
      box-shadow: 0 4px 15px rgba(0,0,0,0.4);
      position: relative; 
      padding-bottom: 20px; 
      cursor: pointer; 
      transition: transform 0.2s;
    }
    .shader-card:hover {
      transform: translateY(-5px); 
    }
    .shader-card-header {
      width: 100%;
      height: 180px;
      background-size: cover;
      background-position: center;
    }
    .shader-content {
      display: flex;
      align-items: center;
      padding: 15px;
      gap: 15px;
      margin-bottom: -10px; 
    }
    .shader-icon {
      width: 70px;
      height: 70px;
      border-radius: 15px;
      border: 2px solid #000;
      background-color: #222;
      overflow: hidden;
      flex-shrink: 0;
      margin-top: -50px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.5);
    }
    .shader-icon img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    .shader-text {
      flex-grow: 1;
    }
    .shader-title {
      font-size: 18px;
      font-weight: bold;
      margin: 0;
      line-height: 1.2;
    }
    .shader-author {
      font-size: 13px;
      color: #bbb;
      margin-top: 2px;
    }
    .shader-description-container {
      padding: 0 15px 15px 15px;
      margin-top: -10px; 
    }
    .shader-description {
      font-size: 14px;
      color: #aaa;
      margin: 0 0 10px 0;
      line-height: 1.4;
    }
    .shader-features {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      font-size: 12px;
      color: #ddd;
    }
    .shader-feature {
      display: flex;
      align-items: center;
      gap: 5px;
    }
    
    /* BOTONES DE ACCI√ìN FLOTANTES (SOLO DESCARGAR) */
    .shader-actions-float {
        position: absolute;
        bottom: 15px;
        right: 15px;
        display: flex;
        gap: 10px;
        z-index: 5;
    }
    .action-btn {
        padding: 8px 15px;
        border: none;
        border-radius: 20px;
        font-weight: bold;
        cursor: pointer;
        transition: 0.2s;
    }
    .btn-download {
        background: linear-gradient(90deg,#00c6ff,#0072ff);
        color: #fff;
        box-shadow: 0 0 10px rgba(0, 114, 255, 0.5);
    }
    .btn-download:hover { transform: translateY(-2px); }

    /* ACCORDION (Informaci√≥n) - sin cambios */
    .info-accordion { width:90%; max-width:700px; margin:0 auto; padding:20px; }
    details { background:#111; border:1px solid #333; border-radius:8px; margin-bottom:10px; overflow:hidden; transition:0.2s; }
    details summary { padding:15px; cursor:pointer; font-weight:bold; color:#fff; list-style:none; font-size:16px; }
    details[open] summary { background:#222; color:#ff4fd8; }
    details p { padding:15px; color:#aaa; font-size:14px; background:#0a0a0a; text-align:left; }

    /* REDES SOCIALES - sin cambios */
    .social-section { text-align:center; margin-top:40px; margin-bottom:40px; }
    .social-section h3 { font-size:16px; letter-spacing:1px; color:#ccc; margin-bottom:20px; }
    .social-icons { display:flex; flex-direction:column; align-items:center; gap:10px; }
    .social-row { display:flex; justify-content:center; gap:15px; }
    .social-icons img { width:35px; height:35px; border-radius:50%; cursor:pointer; transition:0.2s; background:#111; padding:5px; }
    .social-icons img:hover[data-color="youtube"] { background:#ff0000; }
    .social-icons img:hover[data-color="instagram"] { background:#e1306c; }
    .social-icons img:hover[data-color="facebook"] { background:#1877f2; }
    .social-icons img:hover[data-color="twitter"] { background:#1da1f2; }
    .social-icons img:hover[data-color="tiktok"] { background:#000; }
    .social-icons img:hover[data-color="mcpdl"] { background:#25d366; }
    .social-icons img:hover[data-color="discord"] { background:#5865f2; }
    .social-icons img:hover[data-color="curseforge"] { background:#f1641e; }

    /* MODALES GENERALES */
    .modal-overlay {
      display: none;
      background: rgba(0,0,0,0.85);
      position: fixed;
      inset: 0;
      justify-content: center;
      align-items: center;
      z-index: 200;
      overflow-y: auto;
      padding: 20px 0; 
    }
    
    .modal-overlay > div {
      background: #111;
      padding: 18px;
      border-radius: 10px;
      text-align: center;
      width: 90%;
      max-width: 450px;
      margin: 20px 0;
    }

    /* ------------------------------------------------------------------
    // ESTILOS DE LA VISTA DE DETALLE DEL SHADER 
    // ------------------------------------------------------------------ */
    #shaderDetailModal > div {
        max-width: 900px;
        background-color: #0e0e0e;
        padding: 20px;
        position: relative; /* Para que la X flotante funcione */
    }
    
    /* BOT√ìN DE CERRAR EN EL MODAL (X) */
    .close-modal-btn {
        position: absolute;
        top: 15px;
        right: 15px;
        background: #ff007f;
        color: #fff;
        border: none;
        border-radius: 50%;
        width: 35px;
        height: 35px;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
        line-height: 1; 
        box-shadow: 0 0 8px rgba(255, 0, 127, 0.7);
        transition: 0.2s;
        z-index: 210;
    }

    .close-modal-btn:hover {
        background: #ff4fd8;
        transform: scale(1.1);
    }


    .detail-container {
      max-width: 900px;
      margin: auto;
    }
    
    .main-screen {
      position: relative;
      width: 100%;
      overflow: hidden;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.5);
    }
    
    .main-screen img {
      width: 100%;
      max-height: 70vh; 
      border: none;
      border-radius: 8px;
      object-fit: cover;
      display: block;
    }

    .main-screen iframe {
      width: 100%;
      aspect-ratio: 16 / 9; 
      height: auto; 
      border: none;
    }

    /* SCREENSHOTS */
    .screenshots-detail {
      display: flex;
      justify-content: flex-start;
      gap: 10px;
      margin-top: 10px;
      overflow-x: auto;
      padding-bottom: 10px; 
    }

    .screenshots-detail img {
      width: 110px;
      height: 70px;
      object-fit: cover;
      border-radius: 5px;
      cursor: pointer;
      border: 2px solid transparent;
      transition: 0.2s;
      flex-shrink: 0;
    }

    .screenshots-detail img:hover,
    .screenshots-detail img.active {
      transform: scale(1.05);
      border-color: #ff4fd8; 
    }

    /* INFORMACI√ìN PRINCIPAL */
    .info-detail {
      background-color: #181818;
      margin-top: 20px;
      padding: 25px;
      border-radius: 8px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    .title-detail {
      font-size: 32px;
      font-weight: bold;
      text-transform: uppercase;
      margin-bottom: 8px;
    }

    .author-detail {
      font-size: 17px;
      color: #aaa;
      margin-bottom: 20px;
      display: flex;
      align-items: center;
      gap: 8px;
      /* Asegura que haya suficiente padding para que la X no lo toque */
      padding-right: 50px; 
    }
    /* ICONO DEL SHADER EN EL DETALLE */
    .author-detail img {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      object-fit: cover; /* Asegura que el √≠cono se vea bien */
    }

    .buttons-detail {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .btn-detail {
      text-align: center;
      text-decoration: none;
      font-weight: bold;
      text-transform: uppercase;
      padding: 15px;
      border-radius: 6px;
      transition: 0.3s;
      border: none;
      cursor: pointer;
      font-size: 16px;
    }

    .btn-detail-download {
      background: linear-gradient(90deg, #4CAF50, #2E7D32);
      color: #fff;
      box-shadow: 0 0 10px rgba(76,175,80,0.4);
    }

    .btn-detail-download:hover {
      background: linear-gradient(90deg, #66BB6A, #388E3C);
    }
    
    .btn-detail-exclusive {
        background: linear-gradient(90deg, #ffd700, #ffa500); 
        color: #000;
        box-shadow: 0 0 12px rgba(255, 215, 0, 0.7); /* Bloom Dorado */
        transition: all 0.2s;
    }
    .btn-detail-exclusive:hover {
        background: linear-gradient(90deg, #ffe066, #d4a700);
        transform: scale(1.02);
    }


    /* DETALLES */
    .details-detail {
      background-color: #181818;
      padding: 20px;
      border-radius: 8px;
      margin-top: 25px;
      box-shadow: 0 0 15px rgba(0,0,0,0.4);
    }

    .details-detail h3 {
      text-transform: uppercase;
      margin-bottom: 10px;
      font-size: 20px;
      color: #fff;
      border-bottom: 2px solid #333;
      padding-bottom: 5px;
    }

    .description-detail {
      background-color: #111;
      padding: 15px;
      border-radius: 6px;
      position: relative;
    }

    .description-detail p {
      margin: 0;
      font-size: 15px;
      color: #ccc;
      line-height: 1.6;
      white-space: pre-wrap; 
    }

    .extra-detail {
      display: none;
      margin-top: 10px;
      color: #bbb;
    }

    .show-more-detail {
      display: block;
      margin-top: 10px;
      color: #4FC3F7;
      font-weight: bold;
      text-align: right;
      cursor: pointer;
      user-select: none;
    }

    .show-more-detail:hover {
      text-decoration: underline;
    }

    /* CARACTER√çSTICAS INFERIORES ADICIONALES (r1.1, 1.21, Android) */
    .shader-version-info {
        position: absolute;
        bottom: 15px;
        left: 15px;
        display: flex;
        gap: 8px;
        font-size: 11px;
        color: #fff; /* Texto blanco */
        font-weight: bold;
        z-index: 5;
        text-shadow: 0 0 3px #000; /* Sombra sutil para mejor contraste sobre la imagen */
    }
  </style>
</head>
<body onload="loadStatsAndShaders()">

  <div class="banner" id="banner">
    <div class="corner-btn corner-left" id="configBtn" title="Configuraci√≥n">
      <img src="assets/config.png" alt="Config">
    </div>

    <div class="corner-btn corner-right" id="menuBtn" title="Men√∫">
      <img src="assets/menu.png" alt="Menu">
    </div>

    </div>

  <div class="profile">
    <img class="avatar" id="avatar" src="assets/icono.png" alt="Avatar">
    <div class="name">Rexytmc Comunnity</div>
    <div class="by">
      By ReXytMc
      <img src="assets/avatar.png" alt="icono peque√±o">
    </div>
    <div class="stats" id="profileStats"></div>

    <div class="actions">
      <button class="btn btn-follow" id="followBtn" onclick="window.open('https://discord.gg/5KUX8evt3','_blank')">FOLLOW</button>
      <button class="btn btn-donate" onclick="window.open('https://www.patreon.com/cw/Rexytmc','_blank')">DONATE</button>
    </div>
  </div>

  <div class="tabs">
    <div class="tab active" id="tab-shader" onclick="switchTab('shader')">SHADERS</div>
    <div class="tab" id="tab-screenshot" onclick="switchTab('screenshot')">SCREENSHOTS</div>
    <div class="tab" id="tab-info" onclick="switchTab('information')">INFORMATION</div>
  </div>

  <div id="content" class="shader-list-container"></div>

  <div id="shaderDetailModal" class="modal-overlay">
    <div class="detail-container">
        
        <button class="close-modal-btn" onclick="closeShaderDetailModal()">√ó</button>
        
        <div id="mainContentDetail">
            <div class="main-screen">
                </div>

            <div class="screenshots-detail" id="screenshotsDetailContainer">
                </div>
        </div>

        <div class="info-detail">
            <div class="title-detail" id="detailTitle"></div>
            <div class="author-detail" id="detailAuthor">
                <img id="detailAuthorIcon" src="assets/avatar.png" alt="Icono">
                <span id="detailAuthorName"></span>
            </div>

            <div class="buttons-detail">
                <a href="#" class="btn-detail btn-detail-download" id="detailDownloadBtn" target="_blank">Descargar</a>
                <a href="#" class="btn-detail btn-detail-exclusive" id="detailExclusiveBtn" target="_blank">Shader | Exclusivo</a>
                </div>
        </div>

        <div class="details-detail">
            <h3>Detalles</h3>
            <div class="description-detail">
                <p id="detailDescription"></p>

                <div class="extra-detail" id="detailFeaturesContainer">
                    <h4>Caracter√≠sticas:</h4>
                    <ul id="detailFeaturesList" style="list-style:disc; margin-left:20px; color:#ddd; font-size:14px; text-align:left;">
                        </ul>
                </div>

                <span class="show-more-detail" id="toggleDetailsDetail">Mostrar m√°s ‚ñº</span>
            </div>
        </div>
    </div>
  </div>
  <script>
    // ------------------------------------------------------------------
    // ESTRUCTURAS DE DATOS GLOBALES Y CONSTANTES (AHORA EST√ÅTICAS)
    // ------------------------------------------------------------------
    
    // Enlace de Donaci√≥n General
    const GENERAL_DONATE_LINK = 'https://www.patreon.com/cw/Rexytmc'; 
    const YOUTUBE_CHANNEL_URL = 'https://www.youtube.com/@rexytmc-s3d?si=7E_OWq8eIAhF_K9F'; 
    const ENABLE_YOUTUBE_VIDEO = false; 
    const SHADERS_PER_PAGE = 20;
    let currentPage = 1;
    let currentSearchTerm = '';
    
    // --- DATOS DE EJEMPLO 1: SHADERS ---
    const rawShaders = [
        {
            id: 1,
            title: "NEWBXSUPERVANILLA",
            author: "Rexytmc",
            description: "Un shader estilo vanilla inspirado en SuperDuperVanilla la iluminaci√≥n y el agua mantiene el look cl√°sico de Minecraft.",
            features: ["Tools Glow", "Vanilla", "Specular Reflection", "Items Glow", "Flowers Glow", "Lava Noise"],
            downloadLink: "https://link-center.net/1317037/gdBte5PRdr2L", 
            youtubeLink: "https://youtu.be/dO_WQRvdv4M?feature=shared",
            downloads: 0, 
            likes:0,
            imagePath: "assets/supervanilla", 
            versions: ["r1.1", "1.21", "Android"],
            screenshotFiles: ["1.png", "2.png", "3.png", "4.png", "5.png"],
            exclusiveLink: "https://gumroad.com/l/supervanilla_premium" 
        },
        {
            id: 2,
            title: "NEWBXREXYTMC",
            author: "Rexytmc",
            description: "Un Shader estilo vanilla inspirado en los complementary de java.",
            features: ["Raysun", "Leaves Wave", "Mobs Bloom", "Particles Bloom", "Items glow", "Shadow Grass", "Vanilla"],
            downloadLink: "https://link-center.net/1317037/UYMTGV8nGDxr", 
            youtubeLink: "https://www.youtube.com/watch?v=youtube_complementary",
            downloads: 10, 
            likes: 0,
            imagePath: "assets/complementary",
            versions: ["r1.0", "1.21.111", "Android"],
            screenshotFiles: ["1.png", "2.png", "3.png", "4.png", "5.png", "6.png", "7.png", "8.png", "9.png", "10.png", "11.png"],
            exclusiveLink: null 
        }
    ]; 
    
    // --- FUNCI√ìN PARA PROCESAR LOS SHADERS ---
    const publishedShaders = rawShaders.map(shader => {
        if (shader.imagePath) {
            // Construir las rutas si tiene imagePath
            shader.coverImage = `${shader.imagePath}/portada.png`;
            shader.iconImage = `${shader.imagePath}/icono.png`;
            shader.screenshots = shader.screenshotFiles.map(file => `${shader.imagePath}/${file}`);
        }
        return shader;
    });

    
    // --- DATOS DE EJEMPLO 2: SCREENSHOTS ---
    const screenshotImages = [
        { 
            src: "assets/screenshots/1.png", 
            desc: "Primer screenshot del proyecto." 
        },
        { 
            src: "assets/screenshots/2.png", 
            desc: "Segundo screenshot del proyecto." 
        }
    ]; 
    
    // Estad√≠sticas iniciales
    let profileStats = {
        followers: 88,
        projects: publishedShaders.length, 
        downloads: publishedShaders.reduce((sum, s) => sum + s.downloads, 42933), 
        isFollowing: false 
    };
    
    // HTML de la secci√≥n de Informaci√≥n
    const infoHTML = `
      <div class="info-accordion">
        <details><summary>HOW TO INSTALL SHADER</summary><p>Gu√≠a paso a paso para instalar shaders en Minecraft.</p></details>
        <details><summary>ADD-ONS | TEXTURE SHADER</summary><p>Texturas y mejoras visuales para tu shader.</p></details>
        <details><summary>CREATE YOUR SHADER</summary><p>Tutorial para crear tu propio shader desde cero.</p></details>
        <details><summary>SPECIAL CREDITS</summary><p>Muchas gracias a @Stellar por crear el servidor de discord y algunos codigos compartidos:]
 Tambien a @Jesusmiguelgamer por sus texturas noise personalizadas la motivacion y inspiracion :D.</p></details>

        <div class="social-section">
          <h3>SEGUIR A REXYTMC</h3>
          <div class="social-icons">
            <div class="social-row">
              <img src="assets/youtube.png" data-color="youtube" onclick="openLink('${YOUTUBE_CHANNEL_URL}')">
              <img src="assets/instagram.png" data-color="instagram" onclick="openLink('https://www.instagram.com/name')">
              <img src="assets/facebook.png" data-color="facebook" onclick="openLink('https://www.facebook.com/name')">
              <img src="assets/twitter.png" data-color="twitter" onclick="openLink('https://twitter.com/name')">
              <img src="assets/tiktok.png" data-color="tiktok" onclick="openLink('https://www.tiktok.com/@rexytmc')">
            </div>
            <div class="social-row">
              <img src="assets/mcpdl.png" data-color="mcpdl" onclick="openLink('https://mcpedl.com/user/ReXytMc')">
              <img src="assets/discord.png" data-color="discord" onclick="openLink('https://discord.gg/SwAehyBj6')">
              <img src="assets/curseforge.png" data-color="curseforge" onclick="openLink('https://www.curseforge.com/members/REXYTMC')">
            </div>
          </div>
        </div>
      </div>
    `;

    // Referencias DOM
    const content = document.getElementById('content');
    const shaderDetailModal = document.getElementById('shaderDetailModal'); 
    const profileStatsElement = document.getElementById('profileStats');
    const followBtn = document.getElementById('followBtn');
    
    // ------------------------------------------------------------------
    // L√ìGICA DE PERSISTENCIA Y ESTAD√çSTICAS
    // ------------------------------------------------------------------

    function loadStatsAndShaders() {
        profileStats.isFollowing = JSON.parse(localStorage.getItem('isFollowingState') || 'false');
        updateProfileDisplay();
        switchTab('shader');
    }
    
    function updateProfileDisplay() {
        const formatNumber = (num) => {
            if (num >= 1000) {
                return (num / 1000).toFixed(0).replace(/\.0$/, '') + 'k'; 
            }
            return num;
        };
        
        profileStatsElement.textContent = 
            `${profileStats.followers.toLocaleString()} Followers ¬∑ ${profileStats.projects} Projects ¬∑ ${formatNumber(profileStats.downloads)} Downloads`;
            
        if (profileStats.isFollowing) {
            followBtn.textContent = 'SEGUIDO';
            followBtn.classList.add('following');
        } else {
            followBtn.textContent = 'FOLLOW';
            followBtn.classList.remove('following');
        }
    }
    
    function toggleFollow() {
        if (!profileStats.isFollowing) {
            window.open(YOUTUBE_CHANNEL_URL, '_blank'); 
            
            profileStats.followers++; 
            profileStats.isFollowing = true;
            localStorage.setItem('isFollowingState', JSON.stringify(profileStats.isFollowing));
            updateProfileDisplay();
        } else {
            profileStats.followers--; 
            profileStats.isFollowing = false;
            localStorage.setItem('isFollowingState', JSON.stringify(profileStats.isFollowing));
            updateProfileDisplay();
        }
    }


    // ------------------------------------------------------------------
    // L√ìGICA DE SHADERS Y DETALLE
    // ------------------------------------------------------------------

    function getYouTubeEmbedUrl(url) {
        if (!url || !ENABLE_YOUTUBE_VIDEO) return null; 
        const regExp = /^.*(youtu\.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
        const match = url.match(regExp);
        if (match && match[2].length === 11) {
            return `https://www.youtube.com/embed/${match[2]}`;
        }
        return null;
    }
    
    let currentDetailShader = null; 

    function openShaderDetailModal(shaderId) {
        const shaderIdNum = parseInt(shaderId);
        currentDetailShader = publishedShaders.find(s => s.id === shaderIdNum);
        if (!currentDetailShader) return;
        
        const shader = currentDetailShader;
        const detailContainer = document.getElementById('shaderDetailModal').querySelector('.detail-container');
        const mainScreen = detailContainer.querySelector('.main-screen');
        const screenshotsContainer = document.getElementById('screenshotsDetailContainer');
        
        // 1. T√≠tulo y Autor (A√±adiendo el icono del shader)
        document.getElementById('detailTitle').textContent = shader.title;
        document.getElementById('detailAuthorName').textContent = `by ${shader.author || 'Desconocido'}`;
        
        // ¬°ACTUALIZACI√ìN! Usar el icono del SHADER en la l√≠nea "by"
        document.getElementById('detailAuthorIcon').src = shader.iconImage || 'assets/avatar.png';
        
        // 2. Botones de Acci√≥n (Descarga y Exclusivo)
        document.getElementById('detailDownloadBtn').href = shader.downloadLink || '#';
        document.getElementById('detailDownloadBtn').onclick = () => trackDownload(shader.id, shader.downloadLink);

        const exclusiveBtn = document.getElementById('detailExclusiveBtn');
        const exclusiveLink = shader.exclusiveLink || GENERAL_DONATE_LINK;
        exclusiveBtn.href = exclusiveLink;
        
        // 3. Contenido Principal (Portada)
        mainScreen.innerHTML = '';
        const youtubeEmbedUrl = getYouTubeEmbedUrl(shader.youtubeLink);
        let mainContentIsVideo = false;

        if (youtubeEmbedUrl) {
            mainScreen.innerHTML = `<iframe src="${youtubeEmbedUrl}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            mainContentIsVideo = true;
        } else {
            mainScreen.innerHTML = `<img id="mainScreenDetail" src="${shader.coverImage || 'https://via.placeholder.com/800x450.png?text=No+Cover'}" alt="Pantalla principal">`;
        }
        
        // 4. Screenshots y Miniaturas
        screenshotsContainer.innerHTML = '';
        
        const allScreenshots = [
            {src: shader.coverImage || 'https://via.placeholder.com/160x100.png?text=Portada', isCover: true}, 
            ...(shader.screenshots || []).map(src => ({src, isCover: false}))
        ];

        if (allScreenshots.length > 0) {
            allScreenshots.forEach((item, index) => {
                const img = document.createElement('img');
                img.src = item.src;
                img.alt = `Miniatura ${index + 1}`;
                img.dataset.full = item.src;
                img.onclick = () => switchMainScreen(img.src);
                screenshotsContainer.appendChild(img);
            });
            
            if (!mainContentIsVideo) {
                const firstThumbnail = screenshotsContainer.querySelector('img');
                if (firstThumbnail) {
                    firstThumbnail.classList.add('active'); 
                    switchMainScreen(firstThumbnail.src); 
                }
            }
        }
        
        // 5. Descripci√≥n y Caracter√≠sticas
        document.getElementById('detailDescription').textContent = shader.description;
        
        const featuresList = document.getElementById('detailFeaturesList');
        const featuresContainer = document.getElementById('detailFeaturesContainer');
        featuresList.innerHTML = '';
        
        if (shader.features && shader.features.length > 0) {
            shader.features.forEach(feature => {
                const li = document.createElement('li');
                li.textContent = feature;
                featuresList.appendChild(li);
            });
            featuresContainer.style.display = 'block';
        } else {
            featuresContainer.style.display = 'none';
        }

        // 6. Configuraci√≥n de Toggle de Detalles
        const toggle = document.getElementById('toggleDetailsDetail');
        if (featuresContainer.style.display === 'block') {
            toggle.style.display = 'block';
            toggle.textContent = 'Mostrar m√°s ‚ñº';
            featuresContainer.style.display = 'none'; 
            toggle.onclick = toggleDetailDetails;
        } else {
            toggle.style.display = 'none';
        }
        
        shaderDetailModal.style.display = 'flex';
    }

    // Manejar el cambio de imagen principal en el modal de detalle
    function switchMainScreen(src) {
        const mainScreenImg = document.getElementById('mainScreenDetail');
        if (mainScreenImg) mainScreenImg.src = src;

        document.querySelectorAll('.screenshots-detail img').forEach(s => s.classList.remove('active'));
        const activeThumb = document.querySelector(`.screenshots-detail img[data-full="${src}"]`);
        if (activeThumb) activeThumb.classList.add('active');
    }

    function toggleDetailDetails() {
        const extra = document.getElementById('detailFeaturesContainer');
        const toggle = document.getElementById('toggleDetailsDetail');
        
        if (extra.style.display === 'block') {
            extra.style.display = 'none';
            toggle.textContent = 'Mostrar menos ‚ñ≤';
        } else {
            extra.style.display = 'block';
            toggle.textContent = 'Mostrar m√°s ‚ñº';
        }
    }


    function closeShaderDetailModal() {
        shaderDetailModal.style.display = 'none';
        currentDetailShader = null; 
    }


    // TRACKING DE DESCARGA
    function trackDownload(shaderId, downloadLink) {
        const shader = publishedShaders.find(s => s.id === shaderId);
        if (!shader || !downloadLink) return;
        
        shader.downloads++; 
        profileStats.downloads++; 
        updateProfileDisplay(); 
        
        window.open(downloadLink, '_blank');
        
        event.preventDefault(); 
        event.stopPropagation();
    }
    
    // FUNCIONES DE FILTRADO Y PAGINACI√ìN 

    function filterShaders(searchTerm) {
        if (!searchTerm) return publishedShaders;
        
        const lowerCaseTerm = searchTerm.toLowerCase();
        return publishedShaders.filter(shader => 
            shader.title.toLowerCase().includes(lowerCaseTerm) ||
            shader.author.toLowerCase().includes(lowerCaseTerm) ||
            shader.description.toLowerCase().includes(lowerCaseTerm) ||
            shader.features.some(f => f.toLowerCase().includes(lowerCaseTerm))
        );
    }
    
    function setPage(page) {
        const filteredList = filterShaders(currentSearchTerm);
        const totalPages = Math.ceil(filteredList.length / SHADERS_PER_PAGE);
        
        if (page < 1) currentPage = 1;
        else if (page > totalPages && totalPages > 0) currentPage = totalPages;
        else currentPage = page;
        
        renderShadersList();
    }
    
    function handleSearch() {
        const newSearchTerm = document.getElementById('shaderSearchInput').value.trim();
        if (newSearchTerm !== currentSearchTerm) {
            currentSearchTerm = newSearchTerm;
            currentPage = 1; 
            renderShadersList();
        }
    }

    // RENDERIZADO PRINCIPAL DE SHADERS 
    function renderShadersList() {
      content.className = 'shader-list-container';
      content.innerHTML = ''; 

      const filteredShaders = filterShaders(currentSearchTerm);
      const totalPages = Math.ceil(filteredShaders.length / SHADERS_PER_PAGE);
      
      if (currentPage > totalPages && totalPages > 0) {
          currentPage = totalPages;
      } else if (totalPages === 0) {
          currentPage = 1;
      }

      const startIndex = (currentPage - 1) * SHADERS_PER_PAGE;
      const endIndex = startIndex + SHADERS_PER_PAGE;
      const paginatedShaders = filteredShaders.slice(startIndex, endIndex);

      // 1. Renderizar Barra de B√∫squeda
      const searchContainer = document.createElement('div');
      searchContainer.className = 'search-bar';
      searchContainer.innerHTML = `
        <input type="text" id="shaderSearchInput" placeholder="Buscar shaders por t√≠tulo, autor o caracter√≠stica..." value="${currentSearchTerm}">
        <button onclick="handleSearch()">Buscar</button>
      `;
      content.appendChild(searchContainer);
      
      document.getElementById('shaderSearchInput').addEventListener('keyup', (e) => {
          if (e.key === 'Enter') handleSearch();
      });

      // 2. Renderizar Lista de Shaders
      const listDiv = document.createElement('div');
      listDiv.className = 'shader-list';
      content.appendChild(listDiv);

      if (paginatedShaders.length === 0) {
        listDiv.innerHTML = `<p style="text-align:center; color:#555; padding:20px;">${currentSearchTerm ? 'No se encontraron resultados para la b√∫squeda.' : 'A√∫n no hay shaders publicados.'}</p>`;
      } else {
        paginatedShaders.forEach(shader => {
            const featureIcons = {
                "Vanilla": "‚ö°",
                "Cielo 3D": "‚òÅÔ∏è",
                "Agua Sutil": "üíß",
                "Efecto 'Lens Flare'": "‚òÄÔ∏è",
                "Vanilla-like": "üç¶",
                "Iluminaci√≥n üí°": "üí°",
                "Agua Trasl√∫cida": "üí¶",
                "Sombreado": "‚ö´",
                "Alto Detalle": "‚ú®",
                "PVP": "‚öîÔ∏è",
                "FPS Boost": "üöÄ",
                "Sin niebla": "üö´"
            };
            
            const featuresHtml = shader.features.map(feat => 
                `<div class="shader-feature">${featureIcons[feat] || 'üîπ'} ${feat}</div>`
            ).join('');

            // Informaci√≥n de Versi√≥n Transparente
            const versionInfoHtml = (shader.versions || []).map(v => `<span>${v}</span>`).join(' ‚Ä¢ ');
            
            const card = document.createElement('div');
            card.className = 'shader-card';
            
            card.onclick = () => openShaderDetailModal(shader.id);

            card.innerHTML = `
            <div class="shader-card-header" style="background-image: url('${shader.coverImage}');"></div>
            
            <div class="shader-content">
                <div class="shader-icon">
                <img src="${shader.iconImage || 'assets/placeholder_icon.png'}" alt="Icono del Shader">
                </div>
                <div class="shader-text">
                <p class="shader-title">${shader.title}</p>
                <p class="shader-author">By ${shader.author || 'Desconocido'}</p>
                </div>
            </div>
            
            <div class="shader-description-container">
                <p class="shader-description">${shader.description}</p>
                <div class="shader-features">
                    ${featuresHtml}
                </div>
            </div>

            <div class="shader-version-info">
                ${versionInfoHtml}
            </div>
            
            <div class="shader-actions-float" style="right: 15px; bottom: 15px;">
                <button class="action-btn btn-download" onclick="event.stopPropagation(); trackDownload(${shader.id}, '${shader.downloadLink}')">Descargar</button>
            </div>
            `;
            listDiv.appendChild(card);
        });
      }

      // 3. Renderizar Controles de Paginaci√≥n 
      if (totalPages > 1) {
          const paginationDiv = document.createElement('div');
          paginationDiv.className = 'pagination-controls';
          paginationDiv.innerHTML = `
            <button onclick="setPage(${currentPage - 1})" ${currentPage === 1 ? 'disabled' : ''}>Anterior</button>
            <span class="page-info">P√°gina ${currentPage} de ${totalPages}</span>
            <button onclick="setPage(${currentPage + 1})" ${currentPage === totalPages ? 'disabled' : ''}>Siguiente</button>
          `;
          content.appendChild(paginationDiv);
      }
    }


    // ------------------------------------------------------------------
    // L√ìGICA DE SCREENSHOTS Y NAVEGACI√ìN
    // ------------------------------------------------------------------

    function loadScreenshots(images) {
      content.innerHTML = '';
      content.className = 'gallery'; 
      
      if (images.length === 0) {
        content.innerHTML = '<p style="text-align:center; color:#555; padding:20px;">A√∫n no hay screenshots subidos.</p>';
        return;
      }

      images.forEach(item => {
        const div = document.createElement('div');
        div.className = 'gallery-item';
        div.innerHTML = `<img src="${item.src}" alt="${item.desc}"><p>${item.desc}</p>`;
        content.appendChild(div);
      });
    }
    
    function openLink(url) { window.open(url, '_blank'); }

    // NOTA: Se ha eliminado la l√≥gica de mostrar/ocultar el men√∫
    // ya que no hay men√∫.

    function switchTab(tab) {
      document.querySelectorAll('.tab').forEach(el => el.classList.remove('active'));
      
      if (tab === 'shader') {
        document.getElementById('tab-shader').classList.add('active');
        currentPage = 1;
        currentSearchTerm = '';
        renderShadersList(); 
      } else if (tab === 'screenshot') {
        document.getElementById('tab-screenshot').classList.add('active');
        loadScreenshots(screenshotImages);
      } else {
        document.getElementById('tab-info').classList.add('active');
        content.className = '';
        content.innerHTML = infoHTML;
      }
    }
  </script>
</body>
</html>
